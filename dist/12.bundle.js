(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{151:function(t,e,s){},418:function(t,e,s){"use strict";var o=s(151);s.n(o).a},431:function(t,e,s){"use strict";s.r(e);var o=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"big-bro",on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"esc",27,e.key,["Esc","Escape"])?null:t.refs.modalLink.closeModalCommon(e)}}},[t.hasRights?t._e():s("div",[s("h1",[t._v("У Вас нет прав для просмотра этого раздела!")])]),t._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:t.hasRights,expression:"hasRights"}],staticClass:"big-bro"},[s("div",{staticClass:"big-bro--nav"},[s("button",{staticClass:"big-bro--nav--button",class:{"big-bro--nav--button__active":"mountUSB"===t.show},on:{click:function(e){t.show="mountUSB"}}},[s("i",{staticClass:"fa fa-usb",attrs:{"aria-hidden":"true"}})]),t._v(" "),s("button",{staticClass:"big-bro--nav--button",class:{"big-bro--nav--button__active":"alertUSB"===t.show},on:{click:function(e){t.show="alertUSB"}}},[s("i",{staticClass:"fa fa-exclamation-triangle",attrs:{"aria-hidden":"true"}})]),t._v(" "),s("button",{staticClass:"big-bro--nav--button",class:{"big-bro--nav--button__active":"whiteListUSB"===t.show},on:{click:function(e){t.show="whiteListUSB"}}},[s("i",{staticClass:"fa fa-check-circle",attrs:{"aria-hidden":"true"}})])]),t._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:"mountUSB"===t.show,expression:"show === 'mountUSB'"}],staticClass:"big-bro--mount big-bro--wrapper"},[s("h1",{staticClass:"big-bro--h3"},[t._v("Сейчас подключены:")]),t._v(" "),s("table",{staticClass:"big-bro--table"},[t._m(0),t._v(" "),t._l(t.mountUSBActualList,function(e){return s("tr",{key:e._id,staticClass:"big-bro--list",on:{click:function(s){return t.showModal(e)}}},[s("td",[t._v(t._s(new Date(e.mountTime).toLocaleString("ru")))]),t._v(" "),s("td",[s("span",{domProps:{innerHTML:t._s(t.iconGenerator(e.product))}}),t._v("\n              "+t._s(e.hostid)+"\n            ")]),t._v(" "),s("td",[t._v(t._s(e.product))]),t._v(" "),s("td",[t._v(t._s(e.manufacture))]),t._v(" "),s("td",[t._v(t._s(e.serial))]),t._v(" "),s("td",[t._v(t._s(e.USBnameSave))]),t._v(" "),s("td",[t._v(t._s(e.username))]),t._v(" "),s("td",[t._v(t._s(e.regNumber))])])})],2)]),t._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:"alertUSB"===t.show,expression:"show === 'alertUSB'"}],staticClass:"big-bro--alert big-bro--wrapper"},[s("h1",{staticClass:"big-bro--h3"},[t._v("Нарушения политики безопасности:")]),t._v(" "),s("div",{staticClass:"page--wrapper__bigbrother"},t._l(t.pages,function(e){return s("span",{key:e,staticClass:"page",class:{"page-active":e===t.alertChunk+1},on:{click:function(s){return t.setCurrentPage(e)}}},[t._v(t._s(""+e))])}),0),t._v(" "),s("table",{staticClass:"big-bro--table"},[s("thead",{staticClass:"big-bro--table--head"},[s("th",{on:{click:function(e){return t.filter("mountTime")}}},[t._v("Дата подключения")]),t._v(" "),s("th",{on:{click:function(e){return t.filter("hostid")}}},[t._v("Host")]),t._v(" "),s("th",{on:{click:function(e){return t.filter("product")}}},[t._v("Тип устройства")]),t._v(" "),s("th",{on:{click:function(e){return t.filter("manufacture")}}},[t._v("Производитель")]),t._v(" "),s("th",[t._v("Присвоенное имя")]),t._v(" "),s("th",{on:{click:function(e){return t.filter("USBnameSave")}}},[t._v("Серийный номер")]),t._v(" "),s("th",{on:{click:function(e){return t.filter("username",e)}}},[t._v("Пользователь")]),t._v(" "),s("th",[t._v("Рег. Номер")])]),t._v(" "),s("transition-group",{attrs:{name:"fade",tag:"tbody"}},t._l(this.$store.getters.getAlertUSB,function(e){return s("tr",{key:e._id,staticClass:"big-bro--list",on:{click:function(s){return t.showModal(e)}}},[s("td",[t._v(t._s(new Date(e.mountTime).toLocaleString("ru")))]),t._v(" "),s("td",[s("span",{domProps:{innerHTML:t._s(t.iconGenerator(e.product))}}),t._v("\n                "+t._s(e.hostid)+"\n              ")]),t._v(" "),s("td",[t._v(t._s(e.product))]),t._v(" "),s("td",[t._v(t._s(e.manufacture))]),t._v(" "),s("td",[t._v(t._s(e.serial))]),t._v(" "),s("td",[t._v(t._s(e.USBnameSave))]),t._v(" "),s("td",[t._v(t._s(e.username))]),t._v(" "),s("td",[t._v(t._s(e.regNumber))])])}),0)],1)]),t._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:"whiteListUSB"===t.show,expression:"show === 'whiteListUSB'"}],staticClass:"big-bro--white big-bro--wrapper"},[s("h1",{staticClass:"big-bro--h3"},[t._v("Белый список:")]),t._v(" "),s("table",{staticClass:"big-bro--table"},[t._m(1),t._v(" "),t._l(this.$store.getters.getWhiteListUSB,function(e){return s("tr",{key:e._id,staticClass:"big-bro--list",on:{click:function(s){return t.showModal(e)}}},[s("td",[t._v(t._s(new Date(e.mountTime).toLocaleString("ru")))]),t._v(" "),s("td",[s("span",{domProps:{innerHTML:t._s(t.iconGenerator(e.product))}}),t._v("\n              "+t._s(e.hostid)+"\n            ")]),t._v(" "),s("td",[t._v(t._s(e.product))]),t._v(" "),s("td",[t._v(t._s(e.manufacture))]),t._v(" "),s("td",[t._v(t._s(e.serial))]),t._v(" "),s("td",[t._v(t._s(e.USBnameSave))]),t._v(" "),s("td",[t._v(t._s(e.username))]),t._v(" "),s("td",[t._v(t._s(e.regNumber))]),t._v(" "),s("td",[t._v(t._s(e.docNumber))])])})],2)]),t._v(" "),s("modal",{directives:[{name:"show",rawName:"v-show",value:t.isShowModal,expression:"isShowModal"}],attrs:{prop:t.modalProp},on:{close:t.closeModal},scopedSlots:t._u([{key:"header",fn:function(){return[s("h2",[t._v("\n          Изменение учетных данных носителя:\n          "),s("br"),t._v(" "),s("span",{domProps:{innerHTML:t._s(t.iconGenerator(t.modalProp.usb.product))}}),t._v("\n          "+t._s(t.modalProp.usb.serial)+" ("+t._s(t.modalProp.usb.USBnameSave)+")\n        ")])]},proxy:!0},{key:"footer",fn:function(){return[s("button",{staticClass:"button--del",on:{click:function(e){return t.delPost(t.modalProp.usb._id,t.show)}}},[t._v("Удалить запись")]),t._v(" "),s("button",{staticClass:"button--add",on:{click:function(e){return t.editPost(t.modalProp.usb._id,t.show)}}},[t._v("Занести новые данные")])]},proxy:!0}])},[t._v(" "),s("p",[t._v("Читаемое имя")]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.modalProp.usb.serial,expression:"modalProp.usb.serial"}],attrs:{type:"text"},domProps:{value:t.modalProp.usb.serial},on:{input:function(e){e.target.composing||t.$set(t.modalProp.usb,"serial",e.target.value)}}}),t._v(" "),s("p",[t._v("Регистрационный номер")]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.modalProp.usb.regNumber,expression:"modalProp.usb.regNumber"}],attrs:{type:"text"},domProps:{value:t.modalProp.usb.regNumber},on:{input:function(e){e.target.composing||t.$set(t.modalProp.usb,"regNumber",e.target.value)}}}),t._v(" "),s("p",[t._v("Предписание")]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.modalProp.usb.docNumber,expression:"modalProp.usb.docNumber"}],attrs:{type:"text"},domProps:{value:t.modalProp.usb.docNumber},on:{input:function(e){e.target.composing||t.$set(t.modalProp.usb,"docNumber",e.target.value)}}}),t._v(" "),s("p",[t._v("Находится в белом списке")]),t._v(" "),s("div",{staticClass:"modal--usb--grid--body--radio"},[s("label",{attrs:{for:"yes"}},[t._v("Да")]),t._v(" "),s("input",{attrs:{type:"radio",name:"r1",id:"yes"}}),t._v(" "),s("label",{attrs:{for:"no"}},[t._v("Нет")]),t._v(" "),s("input",{attrs:{type:"radio",name:"r1",id:"no"}})])])],1)])};o._withStripped=!0;const r=["Storage","USB DRIVE","FLASH","Flash","DataTraveler","QUMO","HDD"],i=["LaserJet","Printer","CLX-9252"],a=["Controller"],n=["Mouse"];var u={name:"bigBrother",data:()=>({show:"alertUSB",modalProp:{usb:{serial:"1234212",product:"default",USBnameSave:"",docNumber:""}},pages:"",filterChunk:"none",alertChunk:0,isShowModal:!1}),sockets:{mountUSB:function(t){this.$store.commit("mountUSB",t)},injectUSB:function(t){this.$store.commit("injectUSB",t)},returnMountUSB:function(t){this.$store.commit("returnMountUSB",t)},returnAlertUSB:function(t){this.pages=t.pages,this.$store.commit("returnAlertUSB",t.chunk)},returnWhiteListUSB:function(t){this.$store.commit("returnWhiteListUSB",t)}},computed:{mountUSBActualList(){return this.$store.getters.getMountUSB},hasRights(){return"admin"===this.$store.getters.getAuthRights}},methods:{updateTableInfo(){this.$socket.emit("getPost",["","mountUSB"]),this.$socket.emit("getPost",[{chunk:this.alertChunk,filter:this.filterChunk},"alertUSB"]),this.$socket.emit("getPost",["","whiteListUSB"])},showModal(t){document.querySelector("#modal");const e=document.querySelector("#yes"),s=document.querySelector("#no");this.isShowModal=!0,this.modalProp.usb=t;const o=this.modalProp.usb.USBnameSave,r=(this.modalProp.usb.USBnameSave,this.$store.getters.getWhiteListUSB.find(t=>t.USBnameSave===o)),i=void 0!==r;i?e.setAttribute("checked",!0):s.setAttribute("checked",!0),i&&(this.modalProp.usb.docNumber=r.docNumber)},editPost(){document.querySelector("#yes").checked?this.addToWhiteListUSB(this.modalProp.usb):this.$socket.emit("delPost",[this.modalProp.usb._id,"whiteListUSB"]),this.setNewRegNumber(this.modalProp.usb),this.setNewUSBname(this.modalProp.usb),this.setNewDocNumber(this.modalProp.usb),this.updateTableInfo()},closeModal(){this.isShowModal=!1},iconGenerator:t=>(t=>{if(void 0===t)return"";return`<i class="fa fa-${(t=>{const e=e=>e.map(e=>!(t.indexOf(e)<0)).includes(!0);return e(r)?"usb":e(i)?"print":e(a)?"microchip":e(n)?"location-arrow":"question"})(t)} type-icon" aria-hidden="true"></i>`})(t),setCurrentPage(t){this.alertChunk=t-1,this.$socket.emit("getPost",[{chunk:this.alertChunk,filter:this.filterChunk},"alertUSB"])},filter(t){this.filterChunk=t,this.$socket.emit("getPost",[{chunk:this.alertChunk,filter:this.filterChunk},"alertUSB"])},addToWhiteListUSB(t){this.$socket.emit("addPost",[t,"whiteListUSB"]),alert("USB Flash добавленна в белый список")},setNewRegNumber(t){const e={regNumber:t.regNumber,USBnameSave:t.USBnameSave};this.$socket.emit("addPost",[e,"changeRegNumber"])},setNewDocNumber(t){const e={docNumber:t.docNumber,USBnameSave:t.USBnameSave};this.$socket.emit("addPost",[e,"changeDocNumber"])},setNewUSBname(t){const e={USBnameSave:t.USBnameSave,new:t.serial};this.$socket.emit("addPost",[e,"changeUSBName"])},delPost(t,e){this.$socket.emit("delPost",[t,e]),this.updateTableInfo(),this.closeModal()}},created(){this.$socket.emit("getPost",["","mountUSB"]),this.$socket.emit("getPost",[{chunk:0,filter:this.filterChunk},"alertUSB"]),this.$socket.emit("getPost",["","whiteListUSB"])}},c=(s(418),s(2)),l=Object(c.a)(u,o,[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("tr",[s("th",[t._v("Дата монтирования")]),t._v(" "),s("th",[t._v("Host")]),t._v(" "),s("th",[t._v("Тип устройства")]),t._v(" "),s("th",[t._v("Производитель")]),t._v(" "),s("th",[t._v("Присвоенное имя")]),t._v(" "),s("th",[t._v("Серийный номер")]),t._v(" "),s("th",[t._v("Пользователь")]),t._v(" "),s("th",[t._v("Рег. Номер")])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("tr",[s("th",[t._v("Дата добавления")]),t._v(" "),s("th",[t._v("Host")]),t._v(" "),s("th",[t._v("Тип устройства")]),t._v(" "),s("th",[t._v("Производитель")]),t._v(" "),s("th",[t._v("Присвоенное имя")]),t._v(" "),s("th",[t._v("Серийный номер")]),t._v(" "),s("th",[t._v("Пользователь")]),t._v(" "),s("th",[t._v("Рег. Номер")]),t._v(" "),s("th",[t._v("Предписание")])])}],!1,null,null,null);l.options.__file="src/views/bigBrother/bigBrother.vue";e.default=l.exports}}]);
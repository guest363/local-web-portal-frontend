(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{106:function(t,e,s){},124:function(t,e,s){"use strict";s.r(e);var n=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"news--wrapper"},[s("button",{staticClass:"news--new-post-button",attrs:{title:"Добавить новость"},on:{click:t.preparePost}},[s("i",{staticClass:"fa fa-plus",attrs:{"aria-hidden":"true"}})]),t._v(" "),s("h1",{directives:[{name:"show",rawName:"v-show",value:t.showMachine.noArticle,expression:"showMachine.noArticle"}]},[t._v("Новостей нет")]),t._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:t.showMachine.quill,expression:"showMachine.quill"}]},[s("edit-news",{attrs:{newPost:t.newPost,addNews:t.addNews,allTags:t.allTags,goBack:t.goStartShowState},on:{changeHeader:t.changeHeader,changeTag:t.changeTag}})],1),t._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:t.showMachine.selectedArticle,expression:"showMachine.selectedArticle"}]},[s("display-select-news",{attrs:{delNews:t.delNews,news:t.editingNews,editNews:t.editNews,goBack:t.goStartShowState}})],1),t._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:t.showMachine.articles,expression:"showMachine.articles"}]},[s("display-all-news",{attrs:{allNews:t.allNews,selectNews:t.selectNews}})],1)])};n._withStripped=!0;var i={quill:!1,articles:!1,selectedArticle:!1,noArticle:!1,stateSetter:function(t,e,s,n=!1){this.quill=t,this.articles=e,this.selectedArticle=s,this.noArticle=n},noArticle:function(){return this.stateSetter(!1,!1,!1,!0),this},opening:function(){return this.stateSetter(!1,!0,!1),this},selectArticle:function(){return this.stateSetter(!1,!1,!0),this},editButtonClicked:function(){return this.stateSetter(!0,!1,!1),this}},o=s(103),a=s.n(o);s(106);var r=function(t,e){var s=e._c;return s("div",{staticClass:"news"},e._l(e.props.allNews,(function(t){return s("article",{key:t._id,staticClass:"news--card news--card__clikabl",on:{click:function(s){return e.props.selectNews(t._id)}}},[s("div",{staticClass:"news--card--header"},[e._v(e._s(t.header))]),e._v(" "),s("div",{staticClass:"news--card--content news--card--content__prev"},[s("span",{domProps:{innerHTML:e._s(t.content)}})]),e._v(" "),s("div",{staticClass:"news--card--footer"},[s("div",{staticClass:"news--card--footer--tag"},[e._v(e._s(t.tag))]),e._v(" "),s("div",{staticClass:"news--card--footer--date"},[e._v(e._s(t.date))])])])})),0)};r._withStripped=!0;var c=s(2),l=Object(c.a)({},r,[],!0,null,null,null);l.options.__file="src/views/news/displayNews.vue";var d=l.exports,w=function(t,e){var s=e._c;return s("div",{staticClass:"news__one"},[s("div",{staticClass:"news--controll"},[s("button",{staticClass:"news--controll--button",attrs:{title:"Назад"},on:{click:function(t){return e.props.goBack()}}},[e._v("Назад")]),e._v(" "),s("button",{staticClass:"news--controll--button news--controll--button__del",attrs:{title:"Удалить"},on:{click:function(t){return e.props.delNews(e.props.news)}}},[e._v("Удалить")])]),e._v(" "),s("article",{staticClass:"news--card news--card__clikabl"},[s("div",{staticClass:"news--card--header"},[e._v("\n            "+e._s(e.props.news.header)+"\n            "),s("button",{staticClass:"news--card--header--select",on:{click:function(t){return e.props.editNews(e.props.news._id)}}},[s("i",{staticClass:"fa fa-pencil-square-o",attrs:{"aria-hidden":"true"}})])]),e._v(" "),s("div",{staticClass:"news--card--content"},[s("span",{domProps:{innerHTML:e._s(e.props.news.content)}})]),e._v(" "),s("div",{staticClass:"news--card--footer"},[s("div",{staticClass:"news--card--footer--tag"},[e._v(e._s(e.props.news.tag))]),e._v(" "),s("div",{staticClass:"news--card--footer--date"},[e._v(e._s(e.props.news.date))])])])])};w._withStripped=!0;var h=Object(c.a)({},w,[],!0,null,null,null);h.options.__file="src/views/news/displaySelectNews.vue";var u=h.exports,p=function(t,e){var s=e._c;return s("div",[s("div",{staticClass:"news--controll"},[s("button",{staticClass:"news--controll--button",attrs:{title:"Назад"},on:{click:function(t){return e.props.goBack()}}},[e._v("Назад")])]),e._v(" "),s("div",[s("input",{staticClass:"news--controll--edit--input-header",attrs:{type:"text",placeholder:"Заголовок новости"},domProps:{value:e.props.newPost.header},on:{change:function(t){return e.listeners.changeHeader(t)}}})]),e._v(" "),s("div",{staticClass:"news--controll--card",attrs:{id:"editor-container"}}),e._v(" "),s("div",{staticClass:"news--controll--edit--tags"},[s("select",{domProps:{value:e.props.newPost.tag},on:{change:function(t){return e.listeners.changeTag(t)}}},e._l(e.props.allTags,(function(t){return s("option",{key:t},[e._v(e._s(t))])})),0)]),e._v(" "),s("button",{staticClass:"news--controll--edit--button-post",attrs:{title:"Опубликовать"},on:{click:function(t){return e.props.addNews()}}},[e._v("Опубликовать")])])};p._withStripped=!0;var v=Object(c.a)({},p,[],!0,null,null,null);v.options.__file="src/views/news/editNews.vue";var _=v.exports,g=s(18);var N={name:"News",data:()=>({showMachine:"",newPostContent:"",newPost:{}}),components:{displayAllNews:d,displaySelectNews:u,editNews:_},computed:{allNews:function(){return this.$store.getters.GET_ALL_NEWS},allTags:function(){return this.$store.getters.GET_NEWS_TAGS},editingNews:function(){return this.$store.getters.GET_EDIT_NEWS},postResult:function(){""!==this.$store.getters.GET_POST_RESULT_NEWS&&(this.showAlert("Результат",this.$store.getters.GET_POST_RESULT_NEWS),this.$store.commit("RESET_POST_RESULT"))}},methods:{changeHeader(t){this.newPost.header=t.target.value},changeTag(t){this.newPost.tag=t.target.value},showAlert(t,e){this.$store.commit("SET_ALERT_MSG",{header:t,text:e}),this.$store.commit("SHOW_ALERT"),setTimeout(this.closeAlert,2e3)},closeAlert(){this.$store.commit("HIDE_ALERT")},preparePost(){var t;this.showMachine.editButtonClicked(),t="editor-container",this.newPostContent=(t=>{const e=document.getElementById(t);if(void 0===e)return void alert("Ошибка в форматироавнии страницы");e.innerHTML='<div id="editor-container" class="card"></div>';const s=document.getElementById("editor-container");return new a.a(s,{modules:{toolbar:{container:[[{header:[1,2,3,4,!1]}],["bold","italic","color","underline"],["blockquote","align","formula"],[{color:[]},{background:[]}],["link","image","code-block"],[{header:1},{header:2}],[{list:"ordered"},{list:"bullet"}],["clean"]]}},theme:"snow"})})(t)},getSelectedNews(t){this.$store.dispatch("GET_NEWS",t),this.newPost=this.editingNews},goStartShowState(){this.showMachine.opening()},selectNews(t){this.getSelectedNews(t),this.showMachine.selectArticle()},addNews:function(){this.newPost.content=this.newPostContent.root.innerHTML,this.newPost.date=new Date,this.newPost.author=this.$store.state.user,"<p><br></p>"===this.newPostContent.root.innerHTML||void 0===this.newPost.header||void 0===this.newPost.tag?this.showAlert("Ошибка","Заполните все данные для публикации новости"):(this.$store.dispatch("ADD_NEWS",this.newPost),this.showAlert("Результат","Новость добавлена")),this.showMachine.opening()},delNews:function(t){this.$store.dispatch("DEL_NEWS",t),this.showMachine.opening()},editNews(t){this.showMachine.editButtonClicked(),this.getSelectedNews(t),this.preparePost(),this.newPostContent.root.innerHTML=this.editingNews.content}},created(){this.dateOpt=g.a,this.showMachine=i,this.showMachine.opening(),this.$store.dispatch("GET_ALL_NEWS")}},f=Object(c.a)(N,n,[],!1,null,null,null);f.options.__file="src/views/news/News.vue";e.default=f.exports}}]);